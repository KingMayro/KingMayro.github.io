<!DOCTYPE html>
	<html lang="en">
	
	<head>
	
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <title>Browser Flipnote Frogs</title>
	<link rel="tab icon" href="https://kingmayro.github.io/Frog.png">
	<link rel="icon" href="https://kingmayro.github.io/Frog.ico">
	
	<meta property="og:title" content="Browser Flipnote Frogs - King Mayro"/>
	<meta property="og:description" content="A small little project to ''recreate'' the Flipnote frogs from the title screen of Flipnote Studio for the most part."/>
	<meta property="og:url" content="https://kingmayro.github.io/frogs"/>
	<meta property="og:image" content="https://kingmayro.github.io/image/frogembed.png"/>
	<meta name="twitter:card" content="summary_large_image">
	<meta data-react-helmet="true" name="theme-color" content="#cd532d"/>
	
    <style>
	
		@font-face {
		font-family: "Moving Flipbook Gallery";
		src: url("browserfrog/fonts/Moving Notepad Large UI Font.otf");
		}
	
		body {
		margin:0;
		image-rendering: -moz-crisp-edges;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
        -ms-interpolation-mode: nearest-neighbor;
		image-rendering: pixelated;
		background-image: url('browserfrog/notepad.png');
		font-family:"Moving Flipbook Gallery";
		background-color: white;
		color: #cd532d;
		overflow: hidden;
		}
	
        main {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            margin: 0;
        }
        .frog-container, .item-container {
            position: absolute;
            width: 145px;
            height: 112px;
            top: 50%;
            transform: translateY(-50%);
        }
        .frog {
            width: 100%;
            height: 100%;
            position: absolute;
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-select: none;
            -moz-user-drag: none; 
            -ms-user-select: none; 
            user-drag: none; 
        }
		
		    
		button {
		all: unset;
		cursor: pointer;
		}
		
		.verticalbutton {
		width: auto;
        height: 65px;
		}
		
		.verticalbutton:active {
		filter: brightness(77%);
		}
		
		.footerthing{
		position:fixed;
		bottom:0;
		background-color:white;
		width:100%;
		height: 87px;
		}

		.icons {
		border-radius: 600px;
		width: 200px;
		height: auto;
		float: left;
		}

		.name {
		font-size:20px;
		padding-top:30px;
		padding-left:30px;
		float: left;
		margin-bottom:0;
		}
		
		.socialicons {
		display: inline-flex;
		float: left;
		padding-left:50px;
		}
		
		.message-box {
        position: fixed;
        margin-left: 17%;
        margin-right: 17%;
        background-color: #cd532d;
        padding: 10px 20px;
        display: none;
		border-radius: 5px;
		color:white;
        }
		
        .message-box.show {
        display: block;
        }
		
        .message-box p {
        margin: 20px;
        }
		
        .close-btn {
        position: absolute;
        top: 5px;
        right: 5px;
        cursor: pointer;
        }
		
		body.dark-mode {
		background-image: url('browserfrog/notepadDark.png');
		background-color: #00070b !important;
		}

		body.dark-mode .footerthing {
		background-color: #00070b !important;
		}

		body.dark-mode .message-box {
		background-color: #4abc23 !important;
		}


		
		@media screen and (max-width: 1006px) {
		
			body {
			
				background-image: url('browserfrog/notepadsmall.png');
			}
			
			body.dark-mode {
			background-image: url('browserfrog/notepadsmallDark.png');
			}	
			
			.verticalbutton {
			width: auto;
			height: 55px;
			}
			
			.frog-container {
            width: 125px;
            height: 99px;
			}
			
			.message-box {
			border-radius: 0;
			margin-left: 0;
			margin-right: 0;
			font-size:13px;
			}
			
			.icons {
			width: 100px;
			height: auto;
			}

			.name {
			font-size:15px;
			}

			
			.icons {
			width: 150px;
			height: auto;
			}
			
			.name {
			font-size:18px;
			padding-top:20px;
			padding-left:20px;
			}

		
		}
		
		
		@media screen and (max-width: 900px) {
				
			.footerthing{
			height: 99px;
			}

			
			.frog-container {
            width: 110px;
            height: 85px;
			}

		
		}
		
		
		@media screen and (max-width: 750px) {
				
			.footerthing{
			height: 99px;
			}
			
			.verticalbutton {
			width: auto;
			height: 45px;
			}
			
			.frog-container {
            width: 100px;
            height: 80px;
			}
			
			.icons {
			width: 120px;
			height: auto;
			}

		
		}
		
		
			@media screen and (max-width: 650px) {
			
			.verticalbutton {
			width: auto;
			height: 49px;
			}
			
			.message-box {
			font-size:11px;
			}

		
		}
		
		
		
		@media screen and (max-width: 400px) {

			
			.verticalbutton {
			width: auto;
			height: 45px;
			}
		
		}
		
				@media screen and (max-width: 330px) {
				
			.footerthing{
			height: 111px;
			}
			
			.verticalbutton {
			width: auto;
			height: 40px;
			}
			
			.frog-container {
            width: 60px;
            height: 50px;
			}
		
		}
		
    </style>
	</head>
<body>

	<div class=footerthing></div>

	<div class=main>
	
		<div class="frog-container" id="frog-container-1">
			<img class="frog" src="browserfrog/Idle.png">
		</div>

		<div class="frog-container" id="frog-container-2">
			<img class="frog" src="browserfrog/Idle.png">
		</div>

		<div class="frog-container" id="frog-container-3" style="display:none;">
			<img class="frog" src="browserfrog/Idle.png">
		</div>
	
    </div>



	<div>

		<button id="toggleVerticalDragging"><img class=verticalbutton src="browserfrog/buttons/ToggleVertical.png"></button>
		<button id="darkModeToggle"><img class=verticalbutton src="browserfrog/buttons/ToggleTheme.png"></button>	
		<button id="spawnItemButton"><img class=verticalbutton src="browserfrog/buttons/AddFood.png"></button>


   <div class="message-box" id="messageBox">
        <span class="close-btn" onclick="hideMessageBox()" style="white-space:pre-wrap;">X</span>
        <p>A small little project to ''recreate'' the Flipnote frogs from the title screen of Flipnote Studio for the most part. <br><br>Created by :</p>

	 <div>
			<div style="padding-left:10px;">
 
					<div style=text-align:center;>
 
						<img class=icons src="image/KingMayro.webp">
	
						<div style="display: flex;">
							<p class=name>King Mayro</p>
						</div>

					</div>
		
		
				<div class=socialicons>
					<a href="https://github.com/KingMayro"><img src="browserfrog/buttons/Github.png" alt="Github" style="width:50px; height:auto;"></a>
					<div style="padding-right:9px"> </div>  
					<a href="https://www.youtube.com/@KingMayro"><img src="browserfrog/buttons/YouTube.png" alt="YouTube" style="width:50px;height:auto;"></a>
					<div style="padding-left:8px"> </div> 
					<a href="https://famicomcd.github.io/"><img src="browserfrog/buttons/FamicomCD.png" alt="FamicomCD" style="width:50px; height:auto;"></a>
				</div>
			</div> 
		</div>

			<div style="padding-top:90px;">
			<p>Frog Graphics, General graphics, and font by King Mayro <br>Flipnote Studio by Nintendo
			</div>
			
    </div>


	<a href="https://kingmayro.github.io/" style="float:right;padding-left:5px;"><img class=verticalbutton src="browserfrog/buttons/Home.png"></img></a>	
	<div onclick="showMessageBox()" style="float:right;padding-left:5px;"><img class=verticalbutton src="browserfrog/buttons/Info.png"></img></div>		

	</div>
    <button id="refreshButton" style="display:none;" onclick="location.reload()"><img class=verticalbutton src="browserfrog/buttons/Refresh.png"></img></button>




    <script>
        function showMessageBox() {
            const messageBox = document.getElementById("messageBox");
            messageBox.classList.add("show");
        }

        function hideMessageBox() {
            const messageBox = document.getElementById("messageBox");
            messageBox.classList.remove("show");
        }

        const frogContainers = document.querySelectorAll('.frog-container');
        const frames = {
            facingRight: ['browserfrog/Right.png'],
            facingLeft: ['browserfrog/Left.png'],
            facingViewer: ['browserfrog/Idle.png']
        };

        const animations = {
            TurnLeft: [
                {src: "browserfrog/Idle.png", duration: 100},
                {src: "browserfrog/MidLeft.png", duration: 100},
                {src: "browserfrog/Left.png", duration: 100}
            ],
            TurnRight: [
                {src: "browserfrog/Idle.png", duration: 100},
                {src: "browserfrog/MidRight.png", duration: 100},
                {src: "browserfrog/Right.png", duration: 100}
            ],
            LeftReturn: [
                {src: "browserfrog/Left.png", duration: 100},
                {src: "browserfrog/MidLeft.png", duration: 100},
                {src: "browserfrog/Idle.png", duration: 100}
            ],
            RightReturn: [
                {src: "browserfrog/Right.png", duration: 100},
                {src: "browserfrog/MidRight.png", duration: 100},
                {src: "browserfrog/Idle.png", duration: 100}
            ],
            CroakLeft: [
                {src: "browserfrog/Left.png", duration: 100},
                {src: "browserfrog/MidCroakLeft.png", duration: 100},
                {src: "browserfrog/MaxCroakLeft.png", duration: 100},
                {src: "browserfrog/MidCroakLeft.png", duration: 100},
                {src: "browserfrog/Left.png", duration: 100}
            ],
            CroakRight: [
                {src: "browserfrog/Right.png", duration: 100},
                {src: "browserfrog/MidCroakRight.png", duration: 100},
                {src: "browserfrog/MaxCroakRight.png", duration: 100},
                {src: "browserfrog/MidCroakRight.png", duration: 100},
                {src: "browserfrog/Right.png", duration: 100}
            ],
            JumpLeft: [
                {src: "browserfrog/Left.png", duration: 50},
                {src: "browserfrog/JumpUpLeft.png", duration: 100},
                {src: "browserfrog/FallDownLeft.png", duration: 100},
                {src: "browserfrog/Left.png", duration: 100}
            ],
            JumpRight: [
                {src: "browserfrog/Right.png", duration: 25},
                {src: "browserfrog/JumpUpRight.png", duration: 100},
                {src: "browserfrog/FallDownRight.png", duration: 100},
                {src: "browserfrog/Right.png", duration: 100}
            ],
            Blink: [
                {src: "browserfrog/Idle.png", duration: 100},
                {src: "browserfrog/Blink.png", duration: 100},
                {src: "browserfrog/Idle.png", duration: 100}
            ],
            Croak: [
                {src: "browserfrog/Idle.png", duration: 100},
                {src: "browserfrog/MidCroak.png", duration: 100},
                {src: "browserfrog/MaxCroak.png", duration: 100},
                {src: "browserfrog/MidCroak.png", duration: 100},
                {src: "browserfrog/Idle.png", duration: 100}
            ],
            Tongue: [
                {src: "browserfrog/Idle.png", duration: 70},
                {src: "browserfrog/LipUp.png", duration: 70},
                {src: "browserfrog/TongueBounce.png", duration: 70},
                {src: "browserfrog/Tongue.png", duration: 70}
            ],
            Smile: [
                {src: "browserfrog/Smile.png", duration: 100},
            ],
            Ribbit: [
                {src: "browserfrog/Idle.png", duration: 100},
                {src: "browserfrog/Smile.png", duration: 50},
                {src: "browserfrog/WideRibbit.png", duration: 100},
                {src: "browserfrog/MidRibbit.png", duration: 100},
                {src: "browserfrog/SmallRibbit.png", duration: 50},
                {src: "browserfrog/Idle.png", duration: 100}
            ],
            FoodEat: [
                {src: "browserfrog/WideMouth.png", duration: 50},
                {src: "browserfrog/ChompDown.png", duration: 50},
                {src: "browserfrog/Chew1.png", duration: 100},
                {src: "browserfrog/Chew2.png", duration: 100},
                {src: "browserfrog/Chew1.png", duration: 100},
                {src: "browserfrog/Idle.png", duration: 100}
            ]
        };

        let currentStates = ['browserfrog/Idle.png', 'browserfrog/Idle.png', 'browserfrog/Idle.png'];
        let facings = ['viewer', 'viewer', 'viewer'];
        let currentFrameStarts = [Date.now(), Date.now(), Date.now()];
        let verticalDraggingEnabled = true;

        Object.values(animations).flat().forEach(frame => {
            const img = new Image();
            img.src = frame.src;
        });

        const numberOfFrogs = Math.random() < 0.2 ? 3 : 2;

        const verticalPosition = Math.max(window.innerHeight - 129, 0);
        frogContainers.forEach((container, index) => {
            if (index < numberOfFrogs) {
                let horizontalPosition;
                let attempts = 0;
                do {
                    horizontalPosition = Math.random() * Math.max(window.innerWidth - 150, 0);
                    attempts++;
                } while (isTooCloseToOtherFrog(horizontalPosition, index) && attempts < 100);
                container.style.left = `${horizontalPosition}px`;
                container.style.top = `${verticalPosition}px`;
                container.style.display = 'block';
                container.addEventListener('mousedown', (event) => {
                    startDrag(event, container);
                });
                        }
        });

        function isTooCloseToOtherFrog(position, currentIndex) {
            const minDistance = 150;
            for (let i = 0; i < currentIndex; i++) {
                const rect = frogContainers[i].getBoundingClientRect();
                const distance = Math.abs(position - rect.left);
                if (distance < minDistance) {
                    return true;
                }
            }
            return false;
        }

        function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function transitionTo(index, animation) {
            currentStates[index] = animation[0].src;
            let frameIndex = 0;

            const nextFrame = () => {
                const frame = animation[frameIndex];
                const newFrogElement = document.createElement('img');
                newFrogElement.src = isDarkMode ? frame.src.replace('.png', 'Dark.png') : frame.src;
                newFrogElement.className = 'frog';
                newFrogElement.onload = () => {
                    const oldFrogElement = frogContainers[index].querySelector('.frog');
                    if (oldFrogElement) {
                        frogContainers[index].removeChild(oldFrogElement);
                    }
                    frogContainers[index].appendChild(newFrogElement);
                };

                if (frameIndex < animation.length - 1) {
                    frameIndex++;
                    setTimeout(nextFrame, frame.duration);
                }
            };

            nextFrame();
        }

        function moveFrog(index) {
            const actions = ['faceRight', 'faceLeft', 'doViewerAction'];
            const action = getRandomElement(actions);

            if (action === 'faceRight' && facings[index] !== 'right') {
                if (facings[index] === 'left') {
                    transitionTo(index, animations.LeftReturn);
                    setTimeout(() => {
                        transitionTo(index, animations.TurnRight);
                        facings[index] = 'right';
                        setTimeout(() => {
                            const rightActions = ['CroakRight', 'JumpRight'];
                            const nextAction = getRandomElement(rightActions);
                            transitionTo(index, animations[nextAction]);
                            if (nextAction === 'JumpRight') {
                                jumpFrog(index, 10, 'right');
                            }
                        }, 300);
                    }, 300);
                } else {
                    transitionTo(index, animations.TurnRight);
                    facings[index] = 'right';
                    setTimeout(() => {
                        const rightActions = ['CroakRight', 'JumpRight'];
                        const nextAction = getRandomElement(rightActions);
                        transitionTo(index, animations[nextAction]);
                        if (nextAction === 'JumpRight') {
                            jumpFrog(index, 10, 'right');
                        }
                    }, 300);
                }
            }

            if (action === 'faceLeft' && facings[index] !== 'left') {
                if (facings[index] === 'right') {
                    transitionTo(index, animations.RightReturn);
                    setTimeout(() => {
                        transitionTo(index, animations.TurnLeft);
                        facings[index] = 'left';
                        setTimeout(() => {
                            const leftActions = ['CroakLeft', 'JumpLeft'];
                            const nextAction = getRandomElement(leftActions);
                            transitionTo(index, animations[nextAction]);
                            if (nextAction === 'JumpLeft') {
                                jumpFrog(index, 10, 'left');
                            }
                        }, 300);
                    }, 300);
                } else {
                    transitionTo(index, animations.TurnLeft);
                    facings[index] = 'left';
                    setTimeout(() => {
                        const leftActions = ['CroakLeft', 'JumpLeft'];
                        const nextAction = getRandomElement(leftActions);
                        transitionTo(index, animations[nextAction]);
                        if (nextAction === 'JumpLeft') {
                            jumpFrog(index, 10, 'left');
                        }
                    }, 300);
                }
            }

            if (action === 'doViewerAction') {
                if (facings[index] === 'right') {
                    transitionTo(index, animations.RightReturn);
                    setTimeout(() => {
                        performViewerAction(index);
                        facings[index] = 'viewer';
                    }, 300);
                } else if (facings[index] === 'left') {
                    transitionTo(index, animations.LeftReturn);
                    setTimeout(() => {
                        performViewerAction(index);
                        facings[index] = 'viewer';
                    }, 300);
                } else {
                    performViewerAction(index);
                }
            }

            setTimeout(() => moveFrog(index), Math.random() * 3000 + 2000);
        }

        function performViewerAction(index) {
            const viewerActions = ['Blink', 'Croak', 'Tongue', 'Smile', 'Ribbit', 'browserfrog/FrogLoad.gif', 'browserfrog/TalkMore.gif'];

// Very bootleg way to get this to work
    const action = Math.random() < 0 ? 'FoodEat' : getRandomElement(viewerActions);

    if (action === 'browserfrog/FrogLoad.gif' || action === 'browserfrog/TalkMore.gif') {
        const newFrogElement = document.createElement('img');
        newFrogElement.src = action.replace('.gif', isDarkMode ? 'Dark.gif' : '.gif');
        newFrogElement.className = 'frog';
        newFrogElement.onload = () => {
            const oldFrogElement = frogContainers[index].querySelector('.frog');
            if (oldFrogElement) {
                frogContainers[index].removeChild(oldFrogElement);
            }
            frogContainers[index].appendChild(newFrogElement);
        };
    } else {
        transitionTo(index, animations[action]);
    }
}

        function jumpFrog(index, pixels, direction) {
            let movedPixels = 0;
            const interval = setInterval(() => {
                if (movedPixels < pixels) {
                    const currentLeft = parseInt(frogContainers[index].style.left, 10);
                    if (direction === 'right') {
                        frogContainers[index].style.left = `${currentLeft + 3}px`;
                    } else {
                        frogContainers[index].style.left = `${currentLeft - 3}px`;
                    }
                    movedPixels++;
                } else {
                    clearInterval(interval);
                }
            }, 10);
        }

        function startDrag(event, container) {
            const containerRect = container.getBoundingClientRect();
            const initialX = event.clientX || event.touches[0].clientX;
            const initialY = event.clientY || event.touches[0].clientY;
            const offsetX = initialX - containerRect.left;
            const offsetY = initialY - (containerRect.top + containerRect.height / 2);
            let originalTop = parseInt(container.style.top) || containerRect.top;

            function handleDragMove(event) {
                const moveX = event.clientX || event.touches[0].clientX;
                const moveY = event.clientY || event.touches[0].clientY;

                const newX = moveX - offsetX;
                let newY = moveY - offsetY;

                if (!verticalDraggingEnabled) {
                    newY = originalTop;
                } else {
                    originalTop = newY;
                }

                const maxX = window.innerWidth - containerRect.width;
                const maxY = window.innerHeight - containerRect.height;
                const clampedX = Math.min(Math.max(newX, 0), maxX);
                const clampedY = Math.min(Math.max(newY, 0), maxY);

                container.style.left = clampedX + 'px';
                container.style.top = clampedY + 'px';

                event.preventDefault();
            }

            function handleDragEnd() {
                document.removeEventListener('mousemove', handleDragMove);
                document.removeEventListener('mouseup', handleDragEnd);
                document.removeEventListener('touchmove', handleDragMove);
                document.removeEventListener('touchend', handleDragEnd);
            }

            document.addEventListener('mousemove', handleDragMove);
            document.addEventListener('mouseup', handleDragEnd);
            document.addEventListener('touchmove', handleDragMove);
            document.addEventListener('touchend', handleDragEnd);

            event.preventDefault();
        }

        frogContainers.forEach((container) => {
            container.addEventListener('mousedown', (event) => {
                startDrag(event, container);
            });
            container.addEventListener('touchstart', (event) => {
                startDrag(event, container);
            });
        });

        window.onload = () => {
            for (let i = 0; i < numberOfFrogs; i++) {
                moveFrog(i);
            }
            applyDarkMode();
        };

        document.getElementById('toggleVerticalDragging').addEventListener('click', () => {
            verticalDraggingEnabled = !verticalDraggingEnabled;
            frogContainers.forEach((container, index) => {
                container.style.top = `${verticalPosition}px`;
            });
        });
		
		
		
		
const items = ['browserfrog/Misc/Bread.png', 'browserfrog/Misc/Cake.png', 'browserfrog/Misc/Banana.png'];

const specialItems = ['browserfrog/Misc/BlackDSi.png','browserfrog/Misc/WhiteDSi.png','browserfrog/Misc/BlueDSi.png','browserfrog/Misc/RedDSi.png','browserfrog/Misc/MagentaDSi.png','browserfrog/Misc/YellowDSi.png','browserfrog/Misc/PinkDSi.png','browserfrog/Misc/GreenDSi.png','browserfrog/Misc/FrogDoll.png']; 

function spawnRandomItem() {
    const spawnSpecial = Math.random() < 0.05; 
    const randomItemName = spawnSpecial ? specialItems[Math.floor(Math.random() * specialItems.length)] : items[Math.floor(Math.random() * items.length)];
    const randomItem = document.createElement('img');
    randomItem.classList.add('random-item');
    randomItem.src = randomItemName;
    randomItem.style.position = 'absolute';
    randomItem.style.width = '100px';
    randomItem.style.height = '100px';
    randomItem.style.left = `${Math.random() * (window.innerWidth - 50)}px`;
    randomItem.style.top = `${Math.random() * (window.innerHeight - 50)}px`;
    document.body.appendChild(randomItem);

    let initialX, initialY, offsetX, offsetY;
    let originalTop = parseInt(randomItem.style.top) || randomItem.offsetTop;
    let originalLeft = parseInt(randomItem.style.left) || randomItem.offsetLeft;
    let dragging = false;

    randomItem.addEventListener('mousedown', startDrag);
    randomItem.addEventListener('touchstart', startDrag);

    function startDrag(event) {
        dragging = true;
        const eventX = event.clientX || event.touches[0].clientX;
        const eventY = event.clientY || event.touches[0].clientY;
        initialX = eventX - randomItem.offsetLeft;
        initialY = eventY - randomItem.offsetTop;
        offsetX = eventX - initialX;
        offsetY = eventY - initialY;

        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', stopDrag);

        document.addEventListener('touchmove', drag);
        document.addEventListener('touchend', stopDrag);

        event.preventDefault();
    }

    function drag(event) {
        if (dragging) {
            const eventX = event.clientX || event.touches[0].clientX;
            const eventY = event.clientY || event.touches[0].clientY;
            randomItem.style.left = eventX - initialX + 'px';
            randomItem.style.top = eventY - initialY + 'px';
            event.preventDefault();
        }
    }

    function stopDrag(event) {
        dragging = false;
        const eventX = event.clientX || event.changedTouches[0].clientX;
        const eventY = event.clientY || event.changedTouches[0].clientY;
        const newLeft = eventX - initialX;
        const newTop = eventY - initialY;


        const frogs = document.querySelectorAll('.frog-container');
        frogs.forEach(frog => {
            const frogRect = frog.getBoundingClientRect();
            if (eventX >= frogRect.left && eventX <= frogRect.right && eventY >= frogRect.top && eventY <= frogRect.bottom) {
                if (!spawnSpecial) {

                    transitionToFoodEat(frog);

                    randomItem.remove();
                }

            }
        });

        randomItem.style.left = newLeft + 'px';
        randomItem.style.top = newTop + 'px';

        document.removeEventListener('mousemove', drag);
        document.removeEventListener('mouseup', stopDrag);

        document.removeEventListener('touchmove', drag);
        document.removeEventListener('touchend', stopDrag);

        event.preventDefault();
    }
}

const spawnItemButton = document.getElementById('spawnItemButton');
spawnItemButton.addEventListener('click', spawnRandomItem);

// Very bootleg way to get this to work
function transitionToFoodEat(frogContainer) {
    if (isAnimationInProgress()) {
        return;
    }
    
    const frog = frogContainer.querySelector('.frog');
    const frogAnimation = animations.FoodEat;

    currentStates = ['browserfrog/Idle.png', 'browserfrog/Idle.png', 'browserfrog/Idle.png'];
    facings = ['viewer', 'viewer', 'viewer'];
    currentFrameStarts = [Date.now(), Date.now(), Date.now()];
    setAnimationInProgress(true);

    const nextFrame = (index, frameIndex) => {
        if (!isAnimationInProgress()) {
            return;
        }
        
        const frame = frogAnimation[frameIndex];
        const newFrogElement = document.createElement('img');
        newFrogElement.src = isDarkMode ? frame.src.replace('.png', 'Dark.png') : frame.src;
        newFrogElement.className = 'frog';
        newFrogElement.onload = () => {
            const oldFrogElement = frogContainers[index].querySelector('.frog');
            if (oldFrogElement) {
                frogContainers[index].removeChild(oldFrogElement);
            }
            frogContainers[index].appendChild(newFrogElement);
        };

        if (frameIndex < frogAnimation.length - 1) {
            frameIndex++;
            setTimeout(() => nextFrame(index, frameIndex), frame.duration);
        } else {
            setAnimationInProgress(false);
        }
    };

    const frogIndex = Array.from(frogContainers).indexOf(frogContainer);
    if (frogIndex !== -1) {
        nextFrame(frogIndex, 0);
    }
}

function isAnimationInProgress() {
    return animationInProgress;
}

function transitionToFoodEat(frogContainer) {
    const frog = frogContainer.querySelector('.frog');
    const frogAnimation = animations.FoodEat;

    if (isAnimationInProgress(frog)) {
        return;
    }

    currentStates = ['browserfrog/Idle.png', 'browserfrog/Idle.png', 'browserfrog/Idle.png'];
    facings = ['viewer', 'viewer', 'viewer'];
    currentFrameStarts = [Date.now(), Date.now(), Date.now()];

    const nextFrame = (index, frameIndex) => {
        const frame = frogAnimation[frameIndex];
        const newFrogElement = document.createElement('img');
        newFrogElement.src = isDarkMode ? frame.src.replace('.png', 'Dark.png') : frame.src;
        newFrogElement.className = 'frog';
        newFrogElement.onload = () => {
            const oldFrogElement = frogContainers[index].querySelector('.frog');
            if (oldFrogElement) {
                frogContainers[index].removeChild(oldFrogElement);
            }
            frogContainers[index].appendChild(newFrogElement);
        };

        if (frameIndex < frogAnimation.length - 1) {
            frameIndex++;
            setTimeout(() => nextFrame(index, frameIndex), frame.duration);
        }
    };

    const frogIndex = Array.from(frogContainers).indexOf(frogContainer);
    if (frogIndex !== -1) {
        nextFrame(frogIndex, 0);
    }
}

function isAnimationInProgress(frog) {
    const frames = frog.querySelectorAll('.frog');
    for (const frame of frames) {
        if (frame.classList.length > 1) {
            return true;
        }
    }
    return false;
}






		
		
		
		
		


let initialScreenWidth = window.innerWidth;
let initialScreenHeight = window.innerHeight;
let screenSizeChanged = false;

function checkScreenSize() {
    const newWidth = window.innerWidth;
    const newHeight = window.innerHeight;
    if (newWidth !== initialScreenWidth || newHeight !== initialScreenHeight) {
        screenSizeChanged = true;
        document.getElementById('refreshButton').style.display = 'block';
    } else {
        screenSizeChanged = false;
        document.getElementById('refreshButton').style.display = 'none';
    }
}

window.addEventListener('resize', checkScreenSize);





let isDarkMode = localStorage.getItem('isDarkMode') === 'true';
const darkModeToggle = document.getElementById('darkModeToggle');

function applyDarkMode() {
    document.body.classList.toggle('dark-mode', isDarkMode);

    const images = document.querySelectorAll('img:not(.random-item)');
    images.forEach(image => {
        const originalSrc = image.dataset.originalSrc || image.src;
        let newSrc = originalSrc;
        if (isDarkMode) {
            if (originalSrc.includes('Dark')) {
                newSrc = originalSrc;
            } else {
                newSrc = originalSrc.replace('.png', 'Dark.png');
            }
        } else {
            if (originalSrc.includes('Dark')) {
                newSrc = originalSrc.replace('Dark.png', '.png');
            } else {
                newSrc = originalSrc;
            }
        }
        image.src = newSrc;
        if (isDarkMode) {
            image.dataset.originalSrc = originalSrc;
        } else {
            image.removeAttribute('data-original-src');
        }
    });
}


darkModeToggle.addEventListener('click', () => {
    isDarkMode = !isDarkMode;
    localStorage.setItem('isDarkMode', isDarkMode);
    applyDarkMode();
});

applyDarkMode();


        window.onload = () => {
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
            }
            for (let i = 0; i < numberOfFrogs; i++) {
                moveFrog(i);
            }
        };
		

    </script>
</body>
</html>
